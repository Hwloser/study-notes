## 用户态和内核态的概念

**用户态：**一个进程在执行用户自己的代码时处于 用户运行态（用户态）

大部分用户直接面对的程序都是运行在用户态。

Ring（特权级）3 状态不能访问Ring0的地址空间，包括代码和数据。

**内核态：**当一个进程因为系统调用陷入内核代码中执行时处于内运行态

执行的内核代码会使用当前进程的内核栈，每个进程都有自己的内核栈。

### 用户态和内核态的切换

当系统中执行一个程序时，大部分时间是运行在用户态下的，在其需要操作系统帮助完成一些用户态自己没有的特权和能力完成的操作时就会切换到内核态。

#### 用户态切换到内核态的3种方式

(1) 系统调用

这是用户态进程主动要求切换到内核态的一种方式。用户态进程通过系统调用申请使用操作系统提供的服务程序完成工作。

(2) 异常

当cpu在执行运行在用户态下的程序时，发生了一些没有预知的异常，这时会触发当前运行进程切换到处理此异常的内核相关进程中个，也就是切换到了内核态，如缺页异常。

(3) 外围设备的中断

当外围设备完成用户请求的操作后，会想CPU发出相应的中断信号，这是CPU会暂时执行下一条即将要执行的指令而转到与中断信号对应的处理程序去执行