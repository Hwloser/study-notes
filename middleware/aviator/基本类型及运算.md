# 基本类型及运算

> `Aviator`支持常见的类型。

- 数字
- 布尔值
- 字符串
- `BigInt`
- `BigDecimal`
- 正则表达式
- e.g.

## <font color="green">数字</font>

数字包括整数和浮点数，` Aviator `对 ` java `的类型做了缩减和扩容，同时保持了一致的运算符规则。

### <font color="green">整数和算数运算</font>

Aviator 中并没有 ` byte / short / int `等类型，统一整数类型都为 `long`。

> 加减乘除对应的运算符就是 +,-,*,/ 这都比较好理解，取模运算符就是 % ，规则和语法和 java 是一样的。
> 

需要注意，整数相除的结果仍然是整数，比如例子中的  a/b  结果就是 0，遵循 java 的整数运算规则。

运算符之间的优先级如下：
- 单目运算符` - `取负数
- ` * , / `
- ` + , - `

整个规则也和` java `的运算符优先级保持一致。你可以通过括号来强制指定优先级。

**通常来说，复杂算数表达式，从代码的可读性和稳健角度，都推荐使用括号来强制指定优先级。**

### <font color="green">大整数</font>

对于超过` long `的整数，Aviator 还特别支持了大整数类型的支持，对应 ` java.math.BigInteger `类。任何超过` long `范围的证书字面量，会自动提升为` BigInteger `对象，任何数字以` N `字母结尾将自动提升为` BigInteger `。

####  <font color="red">TIPS</font>

**请注意，默认的 long 类型在计算后如果超过范围溢出后，不会自动提升为 BigInt，但是 BigInt 和 long 一起参与算术运算的时候，结果为 BigInt 类型。关于类型转换的规则，我们后面再详细介绍。**

### <font color="green">浮点数</font>

浮点数的运算符跟整数一样，同样支持加减乘除，优先级也是一样。浮点数和浮点数的算术运算结果为浮点数，浮点数和整数的运算结果仍然为浮点数。

### <font color="green">高精度计算（Decimal）</font>

浮点数是无法用于需要精确运算的场景，比如货币运算或者物理公式运算等，这种情况下如果在` Java `里一般推荐使用` BigDecimal `类型，调用它的` add/sub `等方法来做算术运算。

` AviatorScript `将` BigDecimal `作为基本类型来支持（下文简称` decimal `类型），只要浮点数以` M `结尾就会识别类型为` deicmal`，例如` 1.34M `、` 0.333M ` 或者科学计数法` 2e-3M `等等。

` decimal `同样使用`  +,-,*,/ `来做算术运算，` AviatorScript `重载了这些运算符的方法，自动转成` BigDecimal `类的各种运算方法。我们把求平方根的例子改成 ` decimal `运算。

### <font color="green">逻辑运算和短路规则</font>
布尔值可参于逻辑与、逻辑或、逻辑否等运算，假设 x  和 y  的返回结果是布尔值：
- x && y   表示并且的关系，x 为真，并且 y 为真的情况下，结果为 true，否则 false。
- x || y   表示或者的关系， x 为真，或者 y 为真，结果就为 true，两者都为假值的时候结果为 false。
- !x 否定运算符，如果 x 为 true，则结果为 false，反之则为 true。
&& 和 || 都支持短路规则，
- 如果 x  为假值， x && y  直接返回 false， y 就不进行求值。
- 如果 x  为真值， x || y  直接返回 true， y 也不进行求值。

