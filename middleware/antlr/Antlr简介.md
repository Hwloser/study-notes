# Antlr

## 基本概念

一门语言有有效地句子组成，一个句子由短语组成，一个短语由子短语和词汇符号组成。

识别语言的程序被称为语法分析器。语法代指控制语言的**规则**，每条规则都表示一个短语的结构，**文法**就是一组规则。

讲语法分析过程拆解为两个**相似但不同**的**任务或阶段**。

### **<font color="green">词法分析或简单标记化</font>**

将标记输入的程序成为词法分析器。词法分析器能把相关的记号组成记号类型例如INT（整数）、ID（标志符）、FLOAT（浮点数）等。

当语法分析器只关心类型的时候，词法分析器会把词汇符号组成类型，而不是单独的符号。记号

至少包含两部分的信息：

- 记号类型（用于确定词法的结构）
- 匹配记号的文本

### **<font color="green">语法分析</font>**

使用词法分析的记号去识别句子的结构。

默认情况下，ANTLR生成的**语法分析器**会构建一个成为**语法分析树或语法树**的数据结构，它会记录语法分析器**如何识别**输入句子的结构以及它的组件短语。

### **<font color="green">语言识别的数据流</font>**

![img](picture/basic-data-flow.png)

语法分析树的内部节点是分组和确认他们子节点的短语名称。

- 根节点是最抽象的短语名字。
- 叶子结点永远是输入记号。

语法分析树子树根节点对应于语法规则名。

```antlr
assign : ID '=' expr;
```

### **<font color="green">语法分析树的遍历</font>**

语法分析树对于**多次遍历的转换**也是非常有用的，因为在计算**依赖关系**的阶段通常会需要前一个阶段的信息。相比于在每一个阶段都需要准备输入字符，我们只需要遍历语法分析树多次，更有效率。